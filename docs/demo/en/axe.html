<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>axe-core integration - Sa11y Demo</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <meta name="theme-color" content="#7952b3">
  <link rel="icon" href="../assets/favicon.ico" />
  <link href="../assets/main.css" rel="stylesheet">
  <link rel="stylesheet" href="../../assets/css/sa11y.min.css" />
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark mb-4">
      <div class="container">
        <span class="navbar-brand mb-0 h1">Sa11y Demo <span id="v" class="badge bg-info text-dark"></span></span>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
          aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav ms-auto mb-2 mb-md-0">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Everything</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="toggleable.html">Toggleable</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="custom.html">Custom checks</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="other.html">Other</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="errors.html">Errors</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="warnings.html">Warnings</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="pass.html">Good</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="rtl.html">RTL</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>
  <main>
    <div class="container">
      <div class="p-5 mb-5 rounded text-center">
        <h1>Axe-Core Integration</h1>
        <p class="lead">A page without any errors!</p>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-4 d-flex">
          <div class="card mb-4 shadow-sm flex-fill">
            <a href="https://en.wikipedia.org/wiki/Bear"><img
                src="https://upload.wikimedia.org/wikipedia/commons/7/71/2010-kodiak-bear-1.jpg" alt class="img-fluid">
              <div class="card-body">
                <p class="card-text">Learn more about Bears on Wikipedia <span class="fa fa-chevron-right"></span></p>
              </div>
            </a>
          </div>
        </div>
        <div class="col-md-8">
          <p>Bears are carnivoran mammals of the family Ursidae. They are classified as caniforms, or doglike
            carnivorans. Although only eight species of bears are extant, they are widespread, appearing in a wide
            variety of habitats throughout the
            Northern Hemisphere and partially in the Southern Hemisphere. Bears are found on the continents of North
            America, South America, Europe, and Asia. Common characteristics of modern bears include large bodies with
            stocky legs, long
            snouts, small rounded ears, shaggy hair, plantigrade paws with five nonretractile claws, and short tails.
          </p>
          <web-component></web-component>
        </div>
      </div>

      <script>
        class SomeBugs extends HTMLElement {
          constructor() {
            super();
            this.attachShadow({ mode: 'open' });

            this.shadowRoot.innerHTML = `
    <h2>In the shadow realm</h2>
    <p>We're inside the shadow DOM over here. Unfortunately, annotations gets appended before the web component when using axe-core.</p>
    <input type="text" id="input">
    `
          }
        }
        customElements.define('web-component', SomeBugs);
      </script>

      <h2>Taxonomy</h2>
      <p>The family Ursidae is one of the nine families in the suborder Caniformia, or "doglike" carnivorans, within
        the order Carnivora. Bears' closest living relatives are the pinnipeds, canids, and musteloids. Modern bears
        comprise eight species
        in three subfamilies: Ailuropodinae (monotypic with the giant panda), Tremarctinae (monotypic with the
        spectacled bear), and Ursinae (containing six species divided into one to three genera, depending on the
        authority). Nuclear chromosome
        analysis show that the karyotype of the six ursine bears is nearly identical, with each having 74 chromosomes,
        whereas the giant panda has 42 chromosomes and the spectacled bear 52. These smaller numbers can be explained
        by the fusing of
        some chromosomes, and the banding patterns on these match those of the ursine species, but differ from those
        of procyonids, which supports the inclusion of these two species in Ursidae rather than in Procyonidae, where
        they had been placed
        by some earlier authorities.</p>

      <div class="row">
        <div class="col-md-4">
          <img src="https://upload.wikimedia.org/wikipedia/commons/3/3d/Polar_Bear_AdF.jpg"
            alt="A Polar bear jumping on fast ice in Norway." class="img-fluid shadow-sm">
        </div>
        <div class="col-md-8">
          <p>The earliest members of Ursidae belong to the extinct subfamily Amphicynodontinae, including Parictis
            (late Eocene to early middle Miocene, 38–18 Mya) and the slightly younger Allocyon (early Oligocene, 34–30
            Mya), both from North
            America. These animals looked very different from today's bears, being small and raccoon-like in overall
            appearance, with diets perhaps more similar to that of a badger. Parictis does not appear in Eurasia and
            Africa until the
            Miocene.[14] It is unclear whether late-Eocene ursids were also present in Eurasia, although faunal
            exchange across the Bering land bridge may have been possible during a major sea level low stand as early
            as the late Eocene (about 37
            Mya) and continuing into the early Oligocene. European genera morphologically very similar to Allocyon,
            and to the much younger American Kolponomos (about 18 Mya), are known from the Oligocene, including
            Amphicticeps and Amphicynodon.
          </p>
        </div>
      </div>
      <h2>Size</h2>
      <p>The raccoon-sized, dog-like Cephalogale is the oldest-known member of the subfamily Hemicyoninae, which first
        appeared during the middle Oligocene in Eurasia about 30 Mya.[15] The subfamily includes the younger genera
        Phoberocyon (20–15
        Mya), and Plithocyon (15–7 Mya). A Cephalogale-like species gave rise to the genus Ursavus during the early
        Oligocene (30–28 Mya); this genus proliferated into many species in Asia and is ancestral to all living bears.
        Species of Ursavus
        subsequently entered North America, together with Amphicynodon and Cephalogale, during the early Miocene
        (21–18 Mya). Members of the living lineages of bears diverged from Ursavus between 15 and 20 Mya,[24][25]
        likely via the species
        Ursavus elmensis. Based on genetic and morphological data, the Ailuropodinae (pandas) were the first to
        diverge from other living bears about 19 Mya, although no fossils of this group have been found before about 5
        Mya.</p>
    </div>
  </main>
  <footer class="sa11y-ignore d-flex flex-wrap bg-dark text-white justify-content-between align-items-center py-5 mt-5">
    <div class="container">
      <span class="text-muted">This footer area is ignored. If a content editor can't fix it, don't scan it. <a
          href="#">link</a> will be ignored.</span>
    </div>
  </footer>
  <script src="../version.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous">
    </script>

  <!-- Axe-Core -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axe-core/4.10.3/axe.js"></script>

  <!-- Sa11y - Regular script -->
  <script src="../../assets/js/sa11y.umd.min.js"></script>
  <script src="../../assets/js/lang/enUS.umd.js"></script>
  <script>
    // Instantiate
    Sa11y.Lang.addI18n(Sa11yLangEnUS.strings);
    const sa11y = new Sa11y.Sa11y({
      customChecks: 'listen',
      externalDeveloperChecks: true, // Suppress Sa11y's internal developer checks.
      autoDetectShadowComponents: true,
      checkRoot: "body",
      readabilityRoot: "main",
      containerIgnore: 'footer',
      linksToFlag: "a[href^='https://www.dev.']",
      linkIgnoreSpan: '.sr-only-example',
    });

    document.addEventListener('sa11y-custom-checks', () => {
      axe.run(['main'], {
        // Turn off some of axe-core checks to prevent duplication of issues.
        rules: {
          'color-contrast': { enabled: false },
          'image-alt': { enabled: false },
          'heading-order': { enabled: false },
          'image-redundant-alt': { enabled: false },
          'p-as-heading': { enabled: false },
        },
        elementRef: true,
        iframes: false,
        preload: false,
        resultTypes: ['violations'],
      }).then((results) => {
        results.violations.forEach((violation) => {
          violation.nodes.forEach((node) => {
            const selector = node.target[0];
            const element = document.querySelector(selector);
            if (!element) return;

            // Format failure summary.
            const parts = node.failureSummary.split('\n');
            const firstLine = parts[0];
            const listItems = parts.slice(1).map(line => `<li>${sa11y.sanitizeHTML(line.trim())}.</li>`).join('');
            const formatted = `${firstLine}<ul>${sa11y.truncateString(listItems, 250)}</ul>`;

            // HTML of element.
            const html = sa11y.sanitizeHTML(node.html);
            const htmlCode = sa11y.truncateString(html, 120);

            // Push results.
            sa11y.results.push({
              element: node.element.tagName === 'HTML'
                ? undefined : node.element,
              type: 'error',
              content: `${violation.description}. <pre><code>${htmlCode}</code></pre> ${formatted} <hr> Learn more <a href="${violation.helpUrl}" target="_blank">about this axe-core issue.</a>`,
              inline: true,
              position: 'beforebegin',
              external: true, // IMPORTANT: Pass in 'external: true'
            });
          });
        });

        const allDone = new CustomEvent('sa11y-resume');
        document.dispatchEvent(allDone);
      });
    });
  </script>

</body>

</html>